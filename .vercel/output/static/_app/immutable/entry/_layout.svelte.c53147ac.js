import{S as y,i as I,s as S,e as m,b as u,C as p,h as c,D,k as E,l as A,m as C,n as N,E as w,q as x,a as q,r as B,c as z,F as f,G as _,u as F,H,y as J,z as K,A as L,I as M,J as T,K as j,g as h,d,B as O,o as P}from"../chunks/index.6effa054.js";import{s as g}from"../chunks/supabaseClient.a424811f.js";import{i as b}from"../chunks/navigation.073d463b.js";import{p as Q}from"../chunks/stores.db04b866.js";import{n as R}from"../chunks/notification.a285aff1.js";function $(n,s,a){const t=n.slice();return t[1]=s[a].message,t[2]=s[a].status,t}function v(n){let s,a=n[0],t=[];for(let l=0;l<a.length;l+=1)t[l]=k($(n,a,l));return{c(){s=E("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){s=A(l,"DIV",{class:!0});var o=C(s);for(let e=0;e<t.length;e+=1)t[e].l(o);o.forEach(c),this.h()},h(){N(s,"class","flex flex-col fixed top-2 inset-x-2/4 gap-2 items-center mt-2 w-auto z-50")},m(l,o){u(l,s,o);for(let e=0;e<t.length;e+=1)t[e]&&t[e].m(s,null)},p(l,o){if(o&1){a=l[0];let e;for(e=0;e<a.length;e+=1){const i=$(l,a,e);t[e]?t[e].p(i,o):(t[e]=k(i),t[e].c(),t[e].m(s,null))}for(;e<t.length;e+=1)t[e].d(1);t.length=a.length}},d(l){l&&c(s),w(t,l)}}}function k(n){let s,a=n[1]+"",t,l;return{c(){s=E("div"),t=x(a),l=q(),this.h()},l(o){s=A(o,"DIV",{class:!0});var e=C(s);t=B(e,a),l=z(e),e.forEach(c),this.h()},h(){N(s,"class","rounded-lg w-max shadow-xl p-2 px-3 bg-success"),f(s,"bg-success",n[2]),f(s,"bg-error",n[2]==!1)},m(o,e){u(o,s,e),_(s,t),_(s,l)},p(o,e){e&1&&a!==(a=o[1]+"")&&F(t,a),e&1&&f(s,"bg-success",o[2]),e&1&&f(s,"bg-error",o[2]==!1)},d(o){o&&c(s)}}}function U(n){let s,a=n[0]&&v(n);return{c(){a&&a.c(),s=m()},l(t){a&&a.l(t),s=m()},m(t,l){a&&a.m(t,l),u(t,s,l)},p(t,[l]){t[0]?a?a.p(t,l):(a=v(t),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},i:p,o:p,d(t){a&&a.d(t),t&&c(s)}}}function W(n,s,a){let t;return D(n,R,l=>a(0,t=l)),[t]}class X extends y{constructor(s){super(),I(this,s,W,U,S,{})}}function Y(n){let s,a,t;s=new X({});const l=n[1].default,o=H(l,n,n[0],null);return{c(){J(s.$$.fragment),a=q(),o&&o.c()},l(e){K(s.$$.fragment,e),a=z(e),o&&o.l(e)},m(e,i){L(s,e,i),u(e,a,i),o&&o.m(e,i),t=!0},p(e,[i]){o&&o.p&&(!t||i&1)&&M(o,l,e,e[0],t?j(l,e[0],i,null):T(e[0]),null)},i(e){t||(h(s.$$.fragment,e),h(o,e),t=!0)},o(e){d(s.$$.fragment,e),d(o,e),t=!1},d(e){O(s,e),e&&c(a),o&&o.d(e)}}}function Z(n,s,a){let t;D(n,Q,i=>a(3,t=i));let{$$slots:l={},$$scope:o}=s,e=null;return P(async()=>{const{data:i}=await g.auth.getSession();e=i.session,console.log("layout |",e),e&&t.data.session==null&&await b();const{data:{subscription:G}}=g.auth.onAuthStateChange((V,r)=>{console.log("auth state changed"),(e==null?void 0:e.access_token)!=(r==null?void 0:r.access_token)&&(console.log("session changed"),e=r,b(),V=="SIGNED_IN"&&console.log("actually signed in"))});return()=>{G.unsubscribe()}}),n.$$set=i=>{"$$scope"in i&&a(0,o=i.$$scope)},[o,l]}class oe extends y{constructor(s){super(),I(this,s,Z,Y,S,{})}}export{oe as default};
